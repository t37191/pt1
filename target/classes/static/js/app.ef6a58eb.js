(function(t){function e(e){for(var r,o,i=e[0],l=e[1],c=e[2],p=0,d=[];p<i.length;p++)o=i[p],a[o]&&d.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},s=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"0625":function(t,e,n){"use strict";var r=n("83cb"),a=n.n(r);a.a},"0d17":function(t,e,n){},"17c3":function(t,e,n){"use strict";var r=n("74f1"),a=n.n(r);a.a},"1cab":function(t,e,n){},"23fa":function(t,e,n){},"2f1f":function(t,e,n){},"3fea":function(t,e,n){"use strict";var r=n("0d17"),a=n.n(r);a.a},"4e0c":function(t,e,n){"use strict";var r=n("88d9"),a=n.n(r);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"app",attrs:{id:"app"}},[r("Layout",[r("Header",{ref:"header"},[r("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"0"}},[r("div",{on:{click:function(e){return t.navHome()}}},[r("img",{staticClass:"layout-logo",attrs:{src:n("cf05"),alt:""}})]),r("div",{staticClass:"layout-nav-2"},[r("MenuItem",{attrs:{name:"3"}},[r("TopSigninMenu")],1)],1)])],1),r("Content",{style:{"background-color":"white"}},[r("router-view")],1),r("Footer",{ref:"footer",staticClass:"layout-footer-center"},[t._v("2019-2020 © ")])],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isSignin?n("div",[n("Dropdown",{attrs:{trigger:"click"}},[n("Button",{attrs:{ghost:""}},[t._v("\n            Welcome\n            "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",[n("router-link",{attrs:{tag:"span",to:"/user/"+t.$store.state.userData.userId}},[t._v("My Profile")])],1),t.isAdmin?n("DropdownItem",[n("router-link",{attrs:{tag:"span",to:"/trendPost"}},[t._v("发布动态")])],1):t._e(),n("DropdownItem",[n("span",{on:{click:t.signout}},[t._v("Sign out")])])],1)],1)],1):n("div",[n("Button",{attrs:{type:"text",ghost:"",to:"/signup"}},[t._v("Sign up")]),n("Button",{attrs:{type:"default",ghost:"",to:"/signin"}},[t._v("Sign in")])],1)},i=[],l={methods:{signout:function(){this.$store.commit("userSignout"),console.log(this.$route.fullpath),this.$router.push("/")}},computed:{isSignin:function(){return this.$store.state.userData.isSignin},isAdmin:function(){return this.$store.state.userData.isAdmin}}},c=l,u=n("2877"),p=Object(u["a"])(c,o,i,!1,null,null,null),d=p.exports,f={name:"app",data:function(){return{minHeight:0}},components:{TopSigninMenu:d},watch:{$route:function(){""!=localStorage.token&&void 0!=localStorage.token&&null!=localStorage.token||this.$store.commit("userSignout")}},mounted:function(){0==this.$store.state.userData.userId&&0!=localStorage.userId&&(this.$store.commit("updateUserData"),console.log(this.$store.state.userData))},methods:{navHome:function(){location.href="/"}}},h=f,m=(n("034f"),Object(u["a"])(h,a,s,!1,null,null,null)),y=m.exports,_=n("e069"),v=n.n(_);n("dcad");r["default"].use(v.a);var b=n("8c4f"),g=n("bc3a"),w=n.n(g),C=w.a.create({baseURL:"http://localhost:8080/",timeout:1e4});C.interceptors.request.use(function(t){return t.headers.Authorization="Bearer "+localStorage.token,t},function(t){return alert("错误的传参","fail"),Promise.reject(t)});var x={install:function(t){Object.defineProperty(t.prototype,"$http",{value:C})}},$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"12"}},[n("h2",[t._v("Sign up")]),n("br"),n("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[n("FormItem",{attrs:{label:"Name",prop:"name"}},[n("Input",{attrs:{placeholder:"Enter your name"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),n("FormItem",{attrs:{label:"E-mail",prop:"mail"}},[n("Input",{attrs:{placeholder:"Enter your e-mail"},model:{value:t.formValidate.mail,callback:function(e){t.$set(t.formValidate,"mail",e)},expression:"formValidate.mail"}})],1),n("FormItem",{attrs:{label:"Age",prop:"age"}},[n("Input",{attrs:{type:"text",number:""},model:{value:t.formValidate.age,callback:function(e){t.$set(t.formValidate,"age",e)},expression:"formValidate.age"}})],1),n("FormItem",{attrs:{label:"Password",prop:"passwd"}},[n("Input",{attrs:{type:"password"},model:{value:t.formValidate.passwd,callback:function(e){t.$set(t.formValidate,"passwd",e)},expression:"formValidate.passwd"}})],1),n("FormItem",{attrs:{label:"Confirm",prop:"passwdCheck"}},[n("Input",{attrs:{type:"password"},model:{value:t.formValidate.passwdCheck,callback:function(e){t.$set(t.formValidate,"passwdCheck",e)},expression:"formValidate.passwdCheck"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("Submit")]),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("Reset")])],1)],1)],1)],1)],1)},S=[],k=(n("7f7f"),n("c5f6"),n("7cdf"),{data:function(){var t=this,e=function(e,n,r){""===n?r(new Error("Please enter your password")):(""!==t.formValidate.passwdCheck&&t.$refs.formValidate.validateField("passwdCheck"),r())},n=function(e,n,r){""===n?r(new Error("Please enter your password again")):n!==t.formValidate.passwd?r(new Error("The two input passwords do not match!")):r()},r=function(t,e,n){if(!e)return n(new Error("Age cannot be empty"));Number.isInteger(e)||n(new Error("Please enter a numeric value")),n()};return{formValidate:{name:"",mail:"",passwd:"",passwdCheck:""},ruleValidate:{name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],mail:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],age:[{required:!0,validator:r,trigger:"blur"}],passwd:[{required:!0,validator:e,trigger:"blur"}],passwdCheck:[{required:!0,validator:n,trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var n={username:e.formValidate.name,password:e.formValidate.passwd,email:e.formValidate.mail,age:e.formValidate.age};e.$http.post("/user/signup-user",n).then(function(t){"success"==t.data.status?e.$http.post("/user/login",n).then(function(t){e.$store.commit("userSignin",{userId:t.data.user_id,userName:e.formValidate.name,token:t.data.token}),e.$router.push("/")}):e.$Message.error(t.data.msg)}).catch(function(t){console.log(t)})}else e.$Message.error("Fail!")})},handleReset:function(t){this.$refs[t].resetFields()}}}),I=k,R=Object(u["a"])(I,$,S,!1,null,null,null),j=R.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"12"}},[n("h2",[t._v("Sign in")]),n("br"),n("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[n("FormItem",{attrs:{label:"Name",prop:"username"}},[n("Input",{attrs:{placeholder:"Enter your user name"},model:{value:t.formValidate.username,callback:function(e){t.$set(t.formValidate,"username",e)},expression:"formValidate.username"}})],1),n("FormItem",{attrs:{label:"Password",prop:"passwd"}},[n("Input",{attrs:{type:"password"},model:{value:t.formValidate.passwd,callback:function(e){t.$set(t.formValidate,"passwd",e)},expression:"formValidate.passwd"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("Submit")]),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("Reset")])],1)],1)],1)],1)],1)},P=[],D={data:function(){var t=function(t,e,n){""===e&&n(new Error("Please enter your password")),n()};return{formValidate:{username:"",passwd:""},ruleValidate:{username:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],passwd:[{required:!0,validator:t,trigger:"blur"}]}}},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var n={username:e.formValidate.username,password:e.formValidate.passwd};e.$http.post("/user/login",n).then(function(t){if(""!=t.data.token){var n=!0;"false"==t.data.isadmin&&(n=!1),e.$store.commit("userSignin",{userId:t.data.user_id,userName:e.formValidate.username,token:t.data.token,isAdmin:n}),console.log("signin page"),console.log(e.$store.state.userData),e.$router.push("/")}else e.$Message.error(t.data.msg)}).catch(function(t){alert("error")})}else e.$Message.error("Fail!")})},handleReset:function(t){this.$refs[t].resetFields()}}},V=D,M=Object(u["a"])(V,E,P,!1,null,null,null),N=M.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{staticStyle:{"margin-top":"2em"},attrs:{span:"16"}},[r("SearchBar")],1)],1),r("Row",{staticClass:"home-page-product",attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"16"}},[r("Card",{staticClass:"home-page-card",attrs:{"dis-hover":""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("热门论文")]),t._l(t.hotPapers,function(e){return r("Row",{key:e.id,staticStyle:{"text-align":"left"}},[r("Col",{staticClass:"card-title",attrs:{span:"20"}},[r("router-link",{attrs:{to:"/paper/"+e.id}},[t._v(t._s(e.title))])],1),r("Col",{attrs:{span:"4"}},[t._v("\n                        点击量："+t._s(e.cnt)+"\n                    ")])],1)})],2)],1)],1),r("Row",{staticClass:"home-page-trend",attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"8"}},[r("Card",{attrs:{"dis-hover":"",bordered:!1}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("动态")]),r("ul",t._l(t.trends,function(e){return r("li",{key:e.id},[r("div",[r("router-link",{staticStyle:{float:"left"},attrs:{to:"/trend/"+e.id}},[t._v(t._s(e.title))]),r("span",{staticStyle:{float:"right"}},[t._v(t._s(e.time))])],1),r("br")])}),0)])],1),r("Col",{attrs:{span:"8"}},[r("Card",{attrs:{"dis-hover":"",bordered:!1}},[r("div",{staticStyle:{"text-align":"center"}},[r("router-link",{attrs:{to:"/trend/13"}},[r("img",{attrs:{src:n("cf05"),alt:""}})])],1)])],1)],1)],1)},O=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"4"}},[n("Dropdown",{staticStyle:{width:"100%",height:"3em"},attrs:{trigger:"click"},on:{"on-click":t.changeType}},[n("Button",{staticStyle:{width:"100%",height:"3em"}},[t._v("\n                    "+t._s(t.selectedTypeName)+"\n                    "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.types,function(e){return n("DropdownItem",{key:e.type,attrs:{name:e.id}},[t._v("\n                        "+t._s(e.typeName)+"\n                    ")])}),1)],1)],1),n("Col",{attrs:{span:"16"}},[n("Input",{attrs:{search:"",size:"large",placeholder:"Enter something..."},on:{"on-search":t.search},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}})],1)],1)],1)},F=[],L={data:function(){return{types:[{id:0,type:"keywords",typeName:"关键字"},{id:1,type:"titab",typeName:"篇名"},{id:2,type:"author",typeName:"作者"}],selectedType:"titab",selectedTypeName:"篇名",searchContent:""}},methods:{changeType:function(t){this.selectedType=this.types[t].type,this.selectedTypeName=this.types[t].typeName},search:function(){""!=this.searchContent&&this.$router.push({path:"/search/".concat(this.selectedType,"/").concat(this.searchContent)})}}},A=L,H=(n("6301"),Object(u["a"])(A,B,F,!1,null,"bab8ab4a",null)),q=H.exports,z={data:function(){return{keywords:["123","opengl","dx12","MSAA","SSAO"],trends:[],hotPapers:""}},components:{SearchBar:q},beforeMount:function(){var t=this;this.$http.get("/hotpapers").then(function(e){t.hotPapers=e.data.slice(0,15)}),this.$http.get("/announcement/count").then(function(e){0!=parseInt(e.data)&&t.$http.get("/announcement?_start=0&_limit=7").then(function(e){t.trends=e.data})})}},U=z,J=(n("e97a"),Object(u["a"])(U,T,O,!1,null,"0687924d",null)),K=J.exports,W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{staticClass:"topic",attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"14"}},[r("h1",[t._v(t._s(t.topic.topic_name))])])],1),r("Row",{staticClass:"main",attrs:{type:"flex",justify:"center"}},[r("Col",{staticClass:"profile-bar",attrs:{span:"2"}},[r("img",{staticClass:"profile-pic",attrs:{src:n("cf05"),alt:""}}),r("br"),r("router-link",{attrs:{to:"/user/"+t.firstReply.user_id}},[t._v(t._s(t.firstReply.user_name))])],1),r("Col",{staticClass:"context-bar",attrs:{span:"12"}},[r("span",{domProps:{innerHTML:t._s(t.firstReply.reply_content)}})])],1),t._l(t.replies,function(e){return r("Row",{key:e.reply_id,staticClass:"main",attrs:{type:"flex",justify:"center"}},[r("Col",{staticClass:"profile-bar",attrs:{span:"2"}},[r("img",{staticClass:"profile-pic",attrs:{src:n("cf05"),alt:""}}),r("br"),r("router-link",{attrs:{to:"/user/"+t.firstReply.user_id}},[t._v(t._s(e.user_name))])],1),r("Col",{staticClass:"context-bar",attrs:{span:"12"}},[r("span",{domProps:{innerHTML:t._s(e.reply_content)}}),r("br"),r("div",{staticStyle:{"margin-top":"5em"}},[r("Row",{attrs:{type:"flex",justify:"end"}},[r("Col",[r("Button",{attrs:{type:"text"},on:{click:function(n){return t.showSubReply(e.reply_id)}}},[e.isSubReplyShown?r("span",[t._v("隐藏")]):r("span",[t._v("显示")]),t._v("回复")])],1)],1),e.isSubReplyShown?r("Row",[r("Col",t._l(e.subReplies,function(e){return r("ForumReply",{key:e.reply_id,attrs:{rid:e.reply_id,topic_id:t.topic.topic_id,reply_content:e.reply_content}})}),1)],1):t._e()],1)])],1)}),r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",[r("Page",{attrs:{total:t.replyNumber,"show-total":""},on:{"on-change":t.changePage}})],1)],1),r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"14"}},[r("Editor")],1)],1),r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"14"}},[r("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.submitReply}},[t._v("submit")])],1)],1)],2)},G=[],Q=(n("ac4d"),n("8a81"),n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"left"},attrs:{id:"editor"}})}),X=[],Y=n("1a0b"),Z=n.n(Y),tt={data:function(){return{editorContent:""}},mounted:function(){var t=this,e=new Z.a("#editor");e.customConfig.onchange=function(e){t.editorContent=e,t.$store.commit("changeContent",t.editorContent)},e.create()}},et=tt,nt=Object(u["a"])(et,Q,X,!1,null,null,null),rt=nt.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v("\n        "+t._s(t.reply_content)+"\n    ")]),n("Row",{attrs:{type:"flex",justify:"end"}},[n("Col",{attrs:{span:"22"}},[t.isEdit?n("Input",{on:{"on-enter":t.submit},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}}):t._e()],1),n("Col",{attrs:{span:"2"}},[n("Button",{staticClass:"reply-button",attrs:{type:"text",long:""},on:{click:t.submit}},[t.isEdit?n("span",[t._v("发布")]):t._e(),t._v("回复")])],1)],1),n("div",{staticClass:"divider"}),t._l(t.replies,function(e){return n("Row",{key:e.reply_id},[n("ForumReply",{attrs:{rid:e.reply_id,topic_id:t.topic_id,reply_content:e.reply_content}})],1)})],2)},st=[],ot={data:function(){return{replies:"",isEdit:!1,replyContent:""}},methods:{submit:function(){var t=this;if(this.isEdit){var e={userid:this.$store.state.userData.userId,outcomeid:this.topic_id,replycontent:this.replyContent,rreplyid:this.rid,replytype:1};this.$http.post("/bbs_reply",e).then(function(e){t.$Message.success("发布成功")}),this.isEdit=!this.isEdit}else this.$store.state.userData.isSignin?this.isEdit=!this.isEdit:this.$Message.error("please sign in first")}},name:"ForumReply",props:{rid:"",topic_id:"",reply_content:""},beforeMount:function(){var t=this;this.$http.get("/bbs_reply?r_topic_id=".concat(this.topic_id,"&r_reply_id=").concat(this.rid,"&_sort=id&_limit=10")).then(function(e){t.replies=e.data})}},it=ot,lt=(n("3fea"),Object(u["a"])(it,at,st,!1,null,"afe9a892",null)),ct=lt.exports,ut={data:function(){return{topic:"",firstReply:"",replies:"",replyNumber:0}},components:{Editor:rt,ForumReply:ct},methods:{changePage:function(t){var e=this;this.$http.get("/bbs_reply/count?r_topic_id=".concat(this.topic.topic_id,"&r_reply_id=").concat(this.firstReply.reply_id,"&_sort=id&_start=").concat(10*(t-1),"&_limit=10")).then(function(t){e.replies=t.data;var n=!0,r=!1,a=void 0;try{for(var s,o=e.replies[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value;i.isSubReplyShown=!1}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}})},submitReply:function(){var t=this,e=this.$store.state.editorContent;if(""==e)this.$Message.error("reply can not be empty");else{var n={user_id:1,r_topic_id:this.topic.topic_id,reply_content:e,r_reply_id:this.firstReply.reply_id,reply_id:5};this.$http.post("/bbs_reply",n).then(function(e){t.$Message.success("success!"),location.href="/forum/topic/"+t.topic.topic_id}).catch(function(t){console.log(t)})}},showSubReply:function(t){var e=this,n=0;for(n=0;n<this.replies.length;++n)if(this.replies[n].reply_id==t){var r=this.replies[n];r.isSubReplyShown=!r.isSubReplyShown,this.$set(this.replies,n,r);break}this.$http.get("/bbs_reply?r_topic_id=".concat(this.topic.topic_id,"&r_reply_id=").concat(t,"&_sort=id&_limit=10")).then(function(t){var r=e.replies[n];r.subReplies=t.data,e.$set(e.replies,n,r)})}},beforeMount:function(){var t=this;this.$http.get("/bbs_topic/"+this.$route.params.topicId).then(function(e){t.topic=e.data,t.$http.get("/bbs_reply/count?r_topic_id=".concat(t.topic.topic_id)).then(function(e){t.replyNumber=parseInt(e.data.reply_number)}),t.$http.get("/bbs_reply?r_topic_id="+t.topic.topic_id+"&_limit=1&_sort=id").then(function(e){t.firstReply=e.data[0],t.$http.get("/bbs_reply?r_topic_id=".concat(t.topic.topic_id,"&r_reply_id=").concat(t.firstReply.reply_id,"&_sort=id&_start=0&_limit=10")).then(function(e){t.replies=e.data;var n=!0,r=!1,a=void 0;try{for(var s,o=t.replies[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value;i.isSubReplyShown=!1}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}})})}).catch(function(t){console.log(t)})}},pt=ut,dt=(n("17c3"),Object(u["a"])(pt,W,G,!1,null,"075bedb5",null)),ft=dt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"16"}},[n("Tabs",{attrs:{value:"name1"}},[n("TabPane",{attrs:{label:"标签一",name:"name1"}}),n("TabPane",{attrs:{label:"标签二",name:"name2"}}),n("TabPane",{attrs:{label:"标签三",name:"name3"}})],1),n("div",[t._l(t.topicList,function(e){return n("div",{key:e.topic_id},[n("Row",{attrs:{type:"flex",justify:"space-between"}},[n("Col",{attrs:{span:"3"}},[n("Row",{attrs:{type:"flex",justify:"space-between"}},[n("Col",[t._v("\n                                "+t._s(e.vote_number)+"\n                                "),n("br"),t._v("\n                                赞同\n                                ")]),n("Col",[t._v("\n                                "+t._s(e.reply_number)+"\n                                "),n("br"),t._v("\n                                回复\n                                ")])],1)],1),n("Col",{staticClass:"list",attrs:{span:"20"}},[n("Row",[n("router-link",{staticStyle:{color:"#999"},attrs:{to:"/user/"+e.user_id}},[t._v("\n                                    "+t._s(e.user_name)+"\n                                ")])],1),n("Row",[n("h2",{staticClass:"title"},[n("a",{on:{click:function(n){return t.topicPath(e.topic_id)}}},[t._v(t._s(e.topic_name))])])])],1)],1),n("Divider")],1)}),n("Page",{attrs:{total:t.topicNumber,"show-total":""},on:{"on-change":t.changePage}})],2)],1)],1)],1)},mt=[],yt={data:function(){return{topicList:"",topicNumber:0}},methods:{changePage:function(t){var e=this;this.$http.get("/bbs_topic?_start="+10*(t-1)+"&_limit=10").then(function(t){e.topicList=t.data})},topicPath:function(t){location.href="/forum/topic/"+t}},beforeMount:function(){var t=this;this.$http.get("/bbs_topic/count").then(function(e){t.topicNumber=parseInt(e.data)}),this.changePage(1)}},_t=yt,vt=(n("666e"),Object(u["a"])(_t,ht,mt,!1,null,"276258a8",null)),bt=vt.exports,gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{attrs:{type:"flex",justify:"center",gutter:24}},[r("Col",{attrs:{span:"3"}},[r("div",{staticClass:"profile-pic-box"},[r("img",{staticClass:"profile-pic",attrs:{src:n("cf05"),alt:""}})])]),r("Col",{staticClass:"profile-box",attrs:{span:"14"}},[r("Row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("Col",{attrs:{span:"14"}},[r("p",{staticStyle:{"font-size":"3em"}},[t._v(t._s(t.userInfo.username))]),r("br"),t.isEdit?r("div",[r("div",[t._v("年龄："),r("Input",{attrs:{type:"text"},model:{value:t.age,callback:function(e){t.age=e},expression:"age"}})],1),r("div",[t._v("性别："),r("Input",{attrs:{type:"text"},model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}})],1),r("div",[t._v("联系方式："),r("Input",{attrs:{type:"text"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)]):r("div",[r("p",[t._v("年龄："+t._s(t.userInfo.age))]),r("br"),r("p",[t._v("性别："+t._s(t.userInfo.sex))]),r("br"),r("p",[t._v("联系方式："+t._s(t.userInfo.email))])])]),r("Col",{attrs:{span:"2"}},[t.$route.params.userId==t.$store.state.userData.userId?r("Button",{attrs:{type:"info",ghost:"",long:""},on:{click:t.editProfile}},[t._v(t._s(t.curButtonInfo))]):t._e()],1)],1)],1)],1)],1)},wt=[],Ct=(n("3c43"),{data:function(){return{userInfo:"",isEdit:!1,buttonInfo:["编辑信息","提交"],curButtonInfo:"",age:"",sex:"",email:""}},methods:{changeRoute:function(t){this.$router.push("/user/".concat(this.$route.params.userId,"/").concat(t))},editProfile:function(){var t=this;this.isEdit=!this.isEdit,this.isEdit?this.curButtonInfo=this.buttonInfo[1]:(this.curButtonInfo=this.buttonInfo[0],this.userInfo.age=this.age,this.userInfo.sex=this.sex,this.userInfo.email=this.email,this.$http.put("/admin/update",this.userInfo).then(function(e){t.userInfo=e.data,t.updateInfo()}))},updateInfo:function(){this.age=this.userInfo.age,this.email=this.userInfo.email,this.sex=this.userInfo.sex}},beforeMount:function(){var t=this;this.isEdit=!1,this.$http.get("/admin/".concat(this.$store.state.userData.userName)).then(function(e){t.userInfo=e.data,t.updateInfo()}),this.curButtonInfo=this.buttonInfo[0]},mounted:function(){this.$router.push("/user/".concat(this.$route.params.userId,"/fav"))}}),xt=Ct,$t=(n("6551"),Object(u["a"])(xt,gt,wt,!1,null,"c5ea6d9e",null)),St=$t.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{staticClass:"search-bar",attrs:{span:"16"}},[n("SearchBar")],1)],1),n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"16"}},[n("Row",{staticClass:"list-title"}),t._l(t.resList,function(e){return n("Row",{key:e.id,staticClass:"content"},[n("p",{staticClass:"content-title"},[n("router-link",{attrs:{to:"/paper/"+e.id},domProps:{innerHTML:t._s(e.title)}})],1),n("p",{staticClass:"content-info"},t._l(e.authors,function(e){return n("span",{key:e.id},[n("router-link",{attrs:{to:"/expert/"+e.id}},[n("span",[t._v("  ")]),n("span",{domProps:{innerHTML:t._s(e.name)}}),n("span",[t._v("  ")])])],1)}),0),n("p",{staticClass:"content-info",domProps:{innerHTML:t._s(e.year)}}),n("p",{staticClass:"content-abstract",domProps:{innerHTML:t._s(e.abstr)}}),n("p",{staticClass:"content-info"},t._l(e.keywords,function(e){return n("span",{key:e},[t._v("\n                          "),n("span",{domProps:{innerHTML:t._s(e)}}),t._v("  \n                    ")])}),0),n("p",[t._v("点击量："+t._s(e.cnt))]),n("Divider")],1)}),n("Page",{attrs:{total:t.resNumber,"show-total":""},on:{"on-change":t.changePage}})],2)],1)],1)},It=[],Rt=(n("3b2b"),n("a481"),{data:function(){return{content:"",type:"",resNumber:0,resList:[]}},methods:{changePage:function(t){var e=this;this.$http.get("/search?_type=".concat(this.type,"&_content=").concat(this.content,"&_start=").concat(10*(t-1),"&_limit=10")).then(function(t){e.resList=t.data;var n=!0,r=!1,a=void 0;try{for(var s,o=e.resList[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value;i.title=i.title.replace(new RegExp(e.content,"g"),'<span style="color:#ed4014">'.concat(e.content,"</span>")),i.abstr=i.abstr.replace(new RegExp(e.content,"g"),'<span style="color:#ed4014">'.concat(e.content,"</span>"));var l=!0,c=!1,u=void 0;try{for(var p,d=i.authors[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;f.name=f.name.replace(new RegExp(e.content,"g"),'<span style="color:#ed4014">'.concat(e.content,"</span>"))}}catch(w){c=!0,u=w}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}var h=[],m=!0,y=!1,_=void 0;try{for(var v,b=i.keywords[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var g=v.value;h.push(g.replace(new RegExp(e.content,"g"),'<span style="color:#ed4014">'.concat(e.content,"</span>")))}}catch(w){y=!0,_=w}finally{try{m||null==b.return||b.return()}finally{if(y)throw _}}i.keywords=h}}catch(w){r=!0,a=w}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}})},updateList:function(){var t=this;this.content=this.$route.params.searchContent,this.type=this.$route.params.searchType,this.$http.get("/search/count?_type=".concat(this.type,"&_content=").concat(this.content)).then(function(e){t.resNumber=parseInt(e.data),t.changePage(1)})}},watch:{$route:function(){this.updateList()}},components:{SearchBar:q},beforeMount:function(){this.updateList()}}),jt=Rt,Et=(n("4e0c"),Object(u["a"])(jt,kt,It,!1,null,"73208646",null)),Pt=Et.exports,Dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"16"}},[r("h2",[t._v(t._s(t.paper.title))]),r("p",t._l(t.paper.authors,function(e){return r("router-link",{key:e.id,attrs:{to:"/expert/"+e.id}},[t._v("  "+t._s(e.name)+"   ")])}),1),r("p",[t._v("\n                "+t._s(t.paper.year)+"\n            ")]),r("Divider"),r("p",{staticClass:"abstract"},[t._v("摘要："+t._s(t.paper.abstr))]),r("p",{staticClass:"keyword"},[t._v("\n                关键词： "),t._l(t.paper.keywords,function(e){return r("span",{key:e},[t._v("  "+t._s(e)+"  ")])})],2)],1)],1),r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"2"}},[""!=t.paper.pdf?r("Button",{attrs:{type:"info",long:""}},[r("a",{attrs:{href:t.paper.pdf}},[t._v("阅读全文")])]):r("Button",{attrs:{type:"info",long:"",disabled:""}},[t._v("阅读全文")])],1)],1),r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"16"}},[r("p",{staticStyle:{"text-align":"left","font-size":"1.5em","margin-top":"2em"}},[t._v("评论区")]),r("Divider")],1)],1),t._l(t.replies,function(e){return r("Row",{key:e.reply_id,attrs:{type:"flex",justify:"center"}},[r("Col",{staticClass:"profile-bar",attrs:{span:"2"}},[r("img",{staticClass:"profile-pic",attrs:{src:n("cf05"),alt:""}}),r("br"),r("span",[t._v(t._s(e.user_name))])]),r("Col",{staticClass:"context-bar",attrs:{span:"14"}},[r("span",{domProps:{innerHTML:t._s(e.reply_content)}}),r("br")])],1)}),r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"14"}},[r("Editor")],1)],1),r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"14"}},[r("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.submitReply}},[t._v("submit")])],1)],1)],2)},Vt=[],Mt={data:function(){return{paper:"",replies:"",replyNumber:0}},components:{Editor:rt,ForumReply:ct},methods:{submitReply:function(){var t=this,e=this.$store.state.editorContent;if(""==e)this.$Message.error("reply can not be empty");else{var n={userid:parseInt(this.$store.state.userData.userId),outcomeid:this.paper.id,replycontent:e,replytype:0};this.$http.post("/bbs_reply",n).then(function(e){t.$Message.success("success!")}).catch(function(t){console.log(t)})}},showSubReply:function(t){var e=this,n=0;for(n=0;n<this.replies.length;++n)if(this.replies[n].reply_id==t){var r=this.replies[n];r.isSubReplyShown=!r.isSubReplyShown,this.$set(this.replies,n,r);break}this.$http.get("/bbs_reply/count?r_outcome_id=".concat(this.paper.id,"&reply_id=").concat(t,"&_sort=time&&_start=0&_limit=10")).then(function(r){0!=r.data&&e.$http.get("/bbs_reply?r_outcome_id=".concat(e.paper.id,"&reply_id=").concat(t,"&_sort=time&&_start=0&_limit=10")).then(function(t){var r=e.replies[n];r.subReplies=t.data,e.$set(e.replies,n,r)})})}},beforeMount:function(){var t=this;this.$http.get("/paper?id=".concat(this.$route.params.paperId)).then(function(e){t.paper=e.data}).catch(function(t){console.log(t)}),this.$http.get("/bbs_reply/count?r_outcome_id=".concat(this.$route.params.paperId,"&reply_id=0")).then(function(e){t.replyNumber=parseInt(e.data),0!=t.replyNumber&&(console.log(t.replyNumber),t.$http.get("/bbs_reply?r_outcome_id=".concat(t.$route.params.paperId,"&reply_id=0&_start=0&_limit=").concat(t.replyNumber)).then(function(e){t.replies=e.data;var n=!0,r=!1,a=void 0;try{for(var s,o=t.replies[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value;i.isSubReplyShown=!1,i.isEdit=!1}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}))})}},Nt=Mt,Tt=(n("d678"),Object(u["a"])(Nt,Dt,Vt,!1,null,"5043aa4e",null)),Ot=Tt.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"16"}},[n("Row",{staticClass:"profile"},[n("h1",[t._v(t._s(t.expert.name))]),n("p",{staticClass:"profile-dep"},[t._v("论文数量："+t._s(t.expert.n_pubs))])]),n("Row",{staticClass:"detail"},[n("p",{staticClass:"title"},[t._v("作者所属领域")]),n("Divider"),n("div",{staticClass:"fields"},t._l(t.expert.tags,function(e){return n("span",{key:e.t},[t._v(t._s(e.t))])}),0),n("p",{staticClass:"title"},[t._v("作者文献")]),n("Divider"),n("div",{staticClass:"fields"},t._l(t.papers,function(e){return n("Row",{key:e.id,staticClass:"content"},[n("p",{staticClass:"content-title"},[n("router-link",{attrs:{to:"/paper/"+e.id},domProps:{innerHTML:t._s(e.title)}})],1),n("p",{staticClass:"content-info"},t._l(e.authors,function(e){return n("span",{key:e.id},[n("router-link",{attrs:{to:"/expert/"+e.id}},[t._v(" "+t._s(e.name)+" ")])],1)}),0),n("p",{staticClass:"content-info"},[t._v("\n                            "+t._s(e.year)+"\n                        ")]),n("p",{staticClass:"content-abstract",domProps:{innerHTML:t._s(e.abstr)}}),n("Divider")],1)}),1)],1)],1)],1)],1)},Ft=[],Lt={data:function(){return{expert:"",papers:[]}},methods:{getPaper:function(t){this.$http.get("/paper?id=".concat(t)).then(function(t){papers.push(t.data)})}},beforeMount:function(){var t=this;this.$http.get("/expert?id=".concat(this.$route.params.expertId)).then(function(e){t.expert=e.data;var n=!0,r=!1,a=void 0;try{for(var s,o=t.expert.pubs[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)paper=s.value,t.getPaper(paper.i)}catch(i){r=!0,a=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}})}},At=Lt,Ht=(n("0625"),Object(u["a"])(At,Bt,Ft,!1,null,"901b1230",null)),qt=Ht.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Tabs",{attrs:{value:"name1"}},[n("TabPane",{attrs:{label:"论文",name:"name1"}},[t._v("一堆论文")])],1)],1)},Ut=[],Jt={},Kt=Object(u["a"])(Jt,zt,Ut,!1,null,null,null),Wt=Kt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"16"}},[n("Input",{staticClass:"title",attrs:{placeholder:"title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("Editor")],1)],1),n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"16"}},[n("Row",{attrs:{type:"flex",justify:"end"}},[n("Button",{attrs:{type:"info",ghost:""},on:{click:t.commit}},[t._v("commit")])],1)],1)],1)],1)},Qt=[],Xt={data:function(){return{title:""}},methods:{commit:function(){if(""!=this.title)if(""!=this.$store.state.editorContent){var t={title:this.title,content:this.$store.state.editorContent};this.$http.post("/announcement",t).then(function(t){location.href="/"})}else this.$Message.error("填写内容");else this.$Message.error("填写标题")}},components:{Editor:rt}},Yt=Xt,Zt=(n("fe3d"),Object(u["a"])(Yt,Gt,Qt,!1,null,"463589f0",null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"16"}},[n("Row",{staticClass:"profile"},[n("h1",[t._v("Keyword name")]),n("p",{staticClass:"profile-description"},[t._v("description")])]),n("Row",{staticClass:"detail"},[n("p",{staticClass:"title"},[t._v("相关文献")]),n("Divider"),n("Row",{staticClass:"list-title"},[n("Col",{attrs:{span:"10"}},[t._v("\n                        题名\n                    ")]),n("Col",{attrs:{span:"3"}},[t._v("\n                        作者\n                    ")]),n("Col",{attrs:{span:"3"}},[t._v("\n                        来源\n                    ")]),n("Col",{attrs:{span:"3"}},[t._v("\n                        发表时间\n                    ")]),n("Col",{attrs:{span:"3"}},[t._v("\n                        下载\n                    ")]),n("Col",{attrs:{span:"2"}},[t._v("\n                        收藏\n                    ")])],1)],1)],1)],1)],1)},ne=[],re=(n("fd74"),{}),ae=Object(u["a"])(re,ee,ne,!1,null,"85ef4e40",null),se=ae.exports,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n    一堆关注的人\n")])},ie=[],le={},ce=Object(u["a"])(le,oe,ie,!1,null,null,null),ue=ce.exports,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("h1",[t._v("剩余积分：0")]),n("Button",{attrs:{type:"success",ghost:""}},[t._v("   充值   ")])],1)},de=[],fe=(n("ad81"),{}),he=Object(u["a"])(fe,pe,de,!1,null,"60a88c7e",null),me=he.exports,ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{span:"16"}},[n("h1",[t._v(t._s(t.announcement.title))]),n("Divider"),n("p",{staticClass:"context"},[t._v(t._s(t.announcement.content))]),n("p",{staticClass:"time"},[t._v(t._s(t.announcement.time))])],1)],1)],1)},_e=[],ve={data:function(){return{announcement:""}},beforeMount:function(){var t=this;this.$http.get("/announcement/1?announcement_id=".concat(this.$route.params.trendId)).then(function(e){t.announcement=e.data})}},be=ve,ge=(n("7de5"),Object(u["a"])(be,ye,_e,!1,null,"f2318130",null)),we=ge.exports,Ce=[{path:"/",component:K},{path:"/signin",component:N},{path:"/signup",component:j},{path:"/forum/topic/:topicId",component:ft},{path:"/forum",component:bt},{path:"/forum/new",component:te},{path:"/user/:userId",component:St,children:[{path:"fav",component:Wt},{path:"follow",component:ue},{path:"point",component:me}]},{path:"/search/:searchType/:searchContent",component:Pt},{path:"/paper/:paperId",component:Ot},{path:"/expert/:expertId",component:qt},{path:"/keyword/:keyword",component:se},{path:"/trend/:trendId",component:we},{path:"/trendPost",component:te}],xe=n("2f62");r["default"].use(b["a"]),r["default"].use(x),r["default"].use(xe["a"]),r["default"].config.productionTip=!1;var $e=new b["a"]({mode:"history",routes:Ce}),Se=new xe["a"].Store({state:{editorContent:"",userData:{isSignin:!1,userId:0,userName:"",isAdmin:!1}},mutations:{changeContent:function(t,e){t.editorContent=e},userSignin:function(t,e){console.log("store"),console.log(e.token),t.userData.isSignin=!0,t.userData.userId=e.userId,t.userData.userName=e.userName,t.userData.isAdmin=e.isAdmin,localStorage.token=e.token,localStorage.userId=t.userData.userId,localStorage.userName=t.userData.userName,localStorage.isAdmin=t.userData.isAdmin},userSignout:function(t){t.userData.isSignin=!1,t.userData.userId=0,t.userData.userName="",t.userData.isAdmin=!1,localStorage.token="",localStorage.userId=0,localStorage.userName="",localStorage.isAdmin=!1},updateUserData:function(t){t.userData.isSignin=!0,t.userData.userId=localStorage.userId,t.userData.userName=localStorage.userName,t.userData.isAdmin="true"==localStorage.isAdmin,console.log(localStorage.token),console.log(t.userData.isAdmin)}}});new r["default"]({render:function(t){return t(y)},router:$e,store:Se}).$mount("#app")},"5a41":function(t,e,n){},6301:function(t,e,n){"use strict";var r=n("fc36"),a=n.n(r);a.a},"64a9":function(t,e,n){},6551:function(t,e,n){"use strict";var r=n("7831"),a=n.n(r);a.a},"666e":function(t,e,n){"use strict";var r=n("2f1f"),a=n.n(r);a.a},"74f1":function(t,e,n){},7831:function(t,e,n){},"7de5":function(t,e,n){"use strict";var r=n("5a41"),a=n.n(r);a.a},"83cb":function(t,e,n){},"88d9":function(t,e,n){},9649:function(t,e,n){},ad81:function(t,e,n){"use strict";var r=n("23fa"),a=n.n(r);a.a},b535:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"},d678:function(t,e,n){"use strict";var r=n("b535"),a=n.n(r);a.a},e97a:function(t,e,n){"use strict";var r=n("ee41"),a=n.n(r);a.a},ee41:function(t,e,n){},fc36:function(t,e,n){},fd74:function(t,e,n){"use strict";var r=n("1cab"),a=n.n(r);a.a},fe3d:function(t,e,n){"use strict";var r=n("9649"),a=n.n(r);a.a}});
//# sourceMappingURL=app.ef6a58eb.js.map